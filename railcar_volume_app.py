import streamlit as st

# Full data for SKSX117122 (height in inches : volume in gallons)
sksx117122_data = {
    0.00: 0, 0.25: 14, 0.50: 28, 0.75: 43, 1.00: 57, 1.25: 71, 1.50: 85, 1.75: 100,
    2.00: 114, 2.25: 129, 2.50: 143, 2.75: 157, 3.00: 172, 3.25: 186, 3.50: 201, 3.75: 215,
    4.00: 230, 4.25: 244, 4.50: 259, 4.75: 273, 5.00: 288, 5.25: 302, 5.50: 317, 5.75: 331,
    6.00: 345, 6.25: 360, 6.50: 374, 6.75: 389, 7.00: 403, 7.25: 418, 7.50: 432, 7.75: 447,
    8.00: 461, 8.25: 476, 8.50: 490, 8.75: 505, 9.00: 519, 9.25: 534, 9.50: 548, 9.75: 563,
    10.00: 577, 10.25: 592, 10.50: 606, 10.75: 621, 11.00: 635, 11.25: 650, 11.50: 664, 11.75: 679,
    12.00: 693, 12.25: 708, 12.50: 722, 12.75: 737, 13.00: 751, 13.25: 766, 13.50: 780, 13.75: 795,
    14.00: 809, 14.25: 824, 14.50: 838, 14.75: 853, 15.00: 867, 15.25: 882, 15.50: 896, 15.75: 911,
    16.00: 925, 16.25: 940, 16.50: 954, 16.75: 969, 17.00: 983, 17.25: 998, 17.50: 1012, 17.75: 1027,
    18.00: 1041, 18.25: 1056, 18.50: 1070, 18.75: 1085, 19.00: 1099, 19.25: 1114, 19.50: 1128, 19.75: 1143,
    20.00: 1157, 20.25: 1172, 20.50: 1186, 20.75: 1201, 21.00: 1215, 21.25: 1230, 21.50: 1244, 21.75: 1259,
    22.00: 1273, 22.25: 1288, 22.50: 1302, 22.75: 1317, 23.00: 1331, 23.25: 1346, 23.50: 1360, 23.75: 1375,
    24.00: 1389, 24.25: 1404, 24.50: 1418, 24.75: 1433, 25.00: 1447, 25.25: 1462, 25.50: 1476, 25.75: 1491,
    26.00: 1505, 26.25: 1520, 26.50: 1534, 26.75: 1549, 27.00: 1563, 27.25: 1578, 27.50: 1592, 27.75: 1607,
    28.00: 1621, 28.25: 1636, 28.50: 1650, 28.75: 1665, 29.00: 1679, 29.25: 1694, 29.50: 1708, 29.75: 1723,
    30.00: 1737, 30.25: 1752, 30.50: 1766, 30.75: 1781, 31.00: 1795, 31.25: 1810, 31.50: 1824, 31.75: 1839,
    32.00: 1853, 32.25: 1868, 32.50: 1882, 32.75: 1897, 33.00: 1911, 33.25: 1926, 33.50: 1940, 33.75: 1955,
    34.00: 1969, 34.25: 1984, 34.50: 1998, 34.75: 2013, 35.00: 2027, 35.25: 2042, 35.50: 2056, 35.75: 2071,
    36.00: 2085, 36.25: 2100, 36.50: 2114, 36.75: 2129, 37.00: 2143, 37.25: 2158, 37.50: 2172, 37.75: 2187,
    38.00: 2201, 38.25: 2216, 38.50: 2230, 38.75: 2245, 39.00: 2259, 39.25: 2274, 39.50: 2288, 39.75: 2303,
    40.00: 2317, 40.25: 2332, 40.50: 2346, 40.75: 2361, 41.00: 2375, 41.25: 2390, 41.50: 2404, 41.75: 2419,
    42.00: 2433, 42.25: 2448, 42.50: 2462, 42.75: 2477, 43.00: 2491, 43.25: 2506, 43.50: 2520, 43.75: 2535,
    44.00: 2549, 44.25: 2564, 44.50: 2578, 44.75: 2593, 45.00: 2607, 45.25: 2622, 45.50: 2636, 45.75: 2651,
    46.00: 2665, 46.25: 2680, 46.50: 2694, 46.75: 2709, 47.00: 2723, 47.25: 2738, 47.50: 2752, 47.75: 2767,
    48.00: 2781, 48.25: 2796, 48.50: 2810, 48.75: 2825, 49.00: 2839, 49.25: 2854, 49.50: 2868, 49.75: 2883,
    50.00: 2897, 50.25: 2912, 50.50: 2926, 50.75: 2941, 51.00: 2955, 51.25: 2970, 51.50: 2984, 51.75: 2999,
    52.00: 3013, 52.25: 3028, 52.50: 3042, 52.75: 3057, 53.00: 3071, 53.25: 3086, 53.50: 3100, 53.75: 3115,
    54.00: 3129, 54.25: 3144, 54.50: 3158, 54.75: 3173, 55.00: 3187, 55.25: 3202, 55.50: 3216, 55.75: 3231,
    56.00: 3245, 56.25: 3260, 56.50: 3274, 56.75: 3289, 57.00: 3303, 57.25: 3318, 57.50: 3332, 57.75: 3347,
    58.00: 3361, 58.25: 3376, 58.50: 3390, 58.75: 3405, 59.00: 3419, 59.25: 3434, 59.50: 3448, 59.75: 3463,
    60.00: 3477, 60.25: 3492, 60.50: 3506, 60.75: 3521, 61.00: 3535, 61.25: 3550, 61.50: 3564, 61.75: 3579,
    62.00: 3593, 62.25: 3608, 62.50: 3622, 62.75: 3637, 63.00: 3651, 63.25: 3666, 63.50: 3680, 63.75: 3695,
    64.00: 3709, 64.25: 3724, 64.50: 3738, 64.75: 3753, 65.00: 3767, 65.25: 3782, 65.50: 3796, 65.75: 3811,
    66.00: 3825, 66.25: 3840, 66.50: 3854, 66.75: 3869, 67.00: 3883, 67.25: 3898, 67.50: 3912, 67.75: 3927,
    68.00: 3941, 68.25: 3956, 68.50: 3970, 68.75: 3985, 69.00: 3999, 69.25: 4014, 69.50: 4028, 69.75: 4043,
    70.00: 4057, 70.25: 4072, 70.50: 4086, 70.75: 4101, 71.00: 4115, 71.25: 4130, 71.50: 4144, 71.75: 4159,
    72.00: 4173, 72.25: 4188, 72.50: 4202, 72.75: 4217, 73.00: 4231, 73.25: 4246, 73.50: 4260, 73.75: 4275,
    74.00: 4289, 74.25: 4304, 74.50: 4318, 74.75: 4333, 75.00: 4347, 75.25: 4362, 75.50: 4376, 75.75: 4391,
    76.00: 4405, 76.25: 4420, 76.50: 4434, 76.75: 4449, 77.00: 4463, 77.25: 4478, 77.50: 4492, 77.75: 4507,
    78.00: 4521, 78.25: 4536, 78.50: 4550, 78.75: 4565, 79.00: 4579, 79.25: 4594, 79.50: 4608, 79.75: 4623,
    80.00: 4637, 80.25: 4652, 80.50: 4666, 80.75: 4681, 81.00: 4695, 81.25: 4710, 81.50: 4724, 81.75: 4739,
    82.00: 4753, 82.25: 4768, 82.50: 4782, 82.75: 4797, 83.00: 4811, 83.25: 4826, 83.50: 4840, 83.75: 4855,
    84.00: 4869, 84.25: 4884, 84.50: 4898, 84.75: 4913, 85.00: 4927, 85.25: 4942, 85.50: 4956, 85.75: 4971,
    86.00: 4985, 86.25: 5000, 86.50: 5014, 86.75: 5029, 87.00: 5043, 87.25: 5058, 87.50: 5072, 87.75: 5087,
    88.00: 5101, 88.25: 5116, 88.50: 5130, 88.75: 5145, 89.00: 5159, 89.25: 5174, 89.50: 5188, 89.75: 5203,
    90.00: 5217, 90.25: 5232, 90.50: 5246, 90.75: 5261, 91.00: 5275, 91.25: 5290, 91.50: 5304, 91.75: 5319,
    92.00: 5333, 92.25: 5348, 92.50: 5362, 92.75: 5377, 93.00: 5391, 93.25: 5406, 93.50: 5420, 93.75: 5435,
    94.00: 5449, 94.25: 5464, 94.50: 5478, 94.75: 5493, 95.00: 5507, 95.25: 5522, 95.50: 5536, 95.75: 5551,
    96.00: 5565, 96.25: 5580, 96.50: 5594, 96.75: 5609, 97.00: 5623, 97.25: 5638, 97.50: 5652, 97.75: 5667,
    98.00: 5681, 98.25: 5696, 98.50: 5710, 98.75: 5725, 99.00: 5739, 99.25: 5754, 99.50: 5768, 99.75: 5783,
    100.00: 5797, 100.25: 5812, 100.50: 5826, 100.75: 5841, 101.00: 5855, 101.25: 5870, 101.50: 5884, 101.75: 5899,
    102.00: 5913, 102.25: 5928, 102.50: 5942, 102.75: 5957, 103.00: 5971, 103.25: 5986, 103.50: 6000, 103.75: 6015,
    104.00: 6029, 104.25: 6044, 104.50: 6058, 104.75: 6073, 105.00: 6087, 105.25: 6102, 105.50: 6116, 105.75: 6131,
    106.00: 6145, 106.25: 6160, 106.50: 6174, 106.75: 6189, 107.00: 6203, 107.25: 6218, 107.50: 6232, 107.75: 6247,
    108.00: 6261, 108.25: 6276, 108.50: 6290, 108.75: 6305, 109.00: 6319, 109.25: 6334, 109.50: 6348, 109.75: 6363,
    110.00: 6377, 110.25: 6392, 110.50: 6406, 110.75: 6421, 111.00: 6435, 111.25: 6450, 111.50: 6464, 111.75: 6479,
    112.00: 6493, 112.25: 6508, 112.50: 6522, 112.75: 6537, 113.00: 6551, 113.25: 6566, 113.50: 6580, 113.75: 6595,
    114.00: 6609, 114.25: 6624, 114.50: 6638, 114.75: 6653, 115.00: 6667, 115.25: 6682, 115.50: 6696, 115.75: 6711,
    116.00: 6725, 116.25: 6740, 116.50: 6754, 116.75: 6769, 117.00: 6769,
}

# Full data for TCLX290169 (height in inches : volume in gallons)
tclx290169_data = {
    0.00: 0, 0.25: 30, 0.50: 60, 0.75: 91, 1.00: 123, 1.25: 156, 1.50: 190, 1.75: 224,
    2.00: 259, 2.25: 295, 2.50: 331, 2.75: 368, 3.00: 405, 3.25: 444, 3.50: 482, 3.75: 522,
    4.00: 562, 4.25: 602, 4.50: 643, 4.75: 685, 5.00: 727, 5.25: 770, 5.50: 813, 5.75: 857,
    6.00: 901, 6.25: 946, 6.50: 991, 6.75: 1037, 7.00: 1083, 7.25: 1130, 7.50: 1177, 7.75: 1225,
    8.00: 1273, 8.25: 1321, 8.50: 1370, 8.75: 1420, 9.00: 1469, 9.25: 1520, 9.50: 1570, 9.75: 1621,
    10.00: 1673, 10.25: 1725, 10.50: 1777, 10.75: 1829, 11.00: 1882, 11.25: 1936, 11.50: 1990, 11.75: 2044,
    12.00: 2098, 12.25: 2153, 12.50: 2208, 12.75: 2264, 13.00: 2320, 13.25: 2376, 13.50: 2433, 13.75: 2490,
    14.00: 2547, 14.25: 2605, 14.50: 2663, 14.75: 2721, 15.00: 2780, 15.25: 2838, 15.50: 2898, 15.75: 2957,
    16.00: 3017, 16.25: 3077, 16.50: 3138, 16.75: 3198, 17.00: 3260, 17.25: 3321, 17.50: 3382, 17.75: 3444,
    18.00: 3507, 18.25: 3569, 18.50: 3632, 18.75: 3695, 19.00: 3758, 19.25: 3822, 19.50: 3885, 19.75: 3949,
    20.00: 4014, 20.25: 4078, 20.50: 4143, 20.75: 4208, 21.00: 4274, 21.25: 4339, 21.50: 4405, 21.75: 4471,
    22.00: 4537, 22.25: 4604, 22.50: 4671, 22.75: 4738, 23.00: 4805, 23.25: 4872, 23.50: 4940, 23.75: 5008,
    24.00: 5076, 24.25: 5144, 24.50: 5213, 24.75: 5281, 25.00: 5350, 25.25: 5419, 25.50: 5489, 25.75: 5558,
    26.00: 5628, 26.25: 5698, 26.50: 5768, 26.75: 5838, 27.00: 5909, 27.25: 5980, 27.50: 6051, 27.75: 6122,
    28.00: 6193, 28.25: 6264, 28.50: 6336, 28.75: 6408, 29.00: 6480, 29.25: 6552, 29.50: 6624, 29.75: 6697,
    30.00: 6769, 30.25: 6842, 30.50: 6915, 30.75: 6988, 31.00: 7061, 31.25: 7135, 31.50: 7208, 31.75: 7282,
    32.00: 7356, 32.25: 7430, 32.50: 7504, 32.75: 7579, 33.00: 7653, 33.25: 7728, 33.50: 7802, 33.75: 7877,
    34.00: 7952, 34.25: 8028, 34.50: 8103, 34.75: 8178, 35.00: 8254, 35.25: 8329, 35.50: 8405, 35.75: 8481,
    36.00: 8557, 36.25: 8633, 36.50: 8710, 36.75: 8786, 37.00: 8862, 37.25: 8939, 37.50: 9016, 37.75: 9093,
    38.00: 9170, 38.25: 9247, 38.50: 9324, 38.75: 9401, 39.00: 9478, 39.25: 9556, 39.50: 9633, 39.75: 9711,
    40.00: 9789, 40.25: 9866, 40.50: 9944, 40.75: 10022, 41.00: 10100, 41.25: 10178, 41.50: 10257, 41.75: 10335,
    42.00: 10413, 42.25: 10492, 42.50: 10570, 42.75: 10649, 43.00: 10728, 43.25: 10807, 43.50: 10885, 43.75: 10964,
    44.00: 11043, 44.25: 11122, 44.50: 11201, 44.75: 11281, 45.00: 11360, 45.25: 11439, 45.50: 11518, 45.75: 11598,
    46.00: 11677, 46.25: 11757, 46.50: 11836, 46.75: 11916, 47.00: 11996, 47.25: 12075, 47.50: 12155, 47.75: 12235,
    48.00: 12315, 48.25: 12395, 48.50: 12474, 48.75: 12554, 49.00: 12634, 49.25: 12714, 49.50: 12794, 49.75: 12874,
    50.00: 12955, 50.25: 13035, 50.50: 13115, 50.75: 13195, 51.00: 13275, 51.25: 13355, 51.50: 13436, 51.75: 13516,
    52.00: 13596, 52.25: 13676, 52.50: 13757, 52.75: 13837, 53.00: 13917, 53.25: 13998, 53.50: 14078, 53.75: 14158,
    54.00: 14239, 54.25: 14319, 54.50: 14399, 54.75: 14480, 55.00: 14560, 55.25: 14640, 55.50: 14721, 55.75: 14801,
    56.00: 14881, 56.25: 14962, 56.50: 15042, 56.75: 15122, 57.00: 15202, 57.25: 15283, 57.50: 15363, 57.75: 15443,
    58.00: 15523, 58.25: 15604, 58.50: 15684, 58.75: 15764, 59.00: 15844, 59.25: 15924, 59.50: 16004, 59.75: 16084,
    60.00: 16164, 60.25: 16244, 60.50: 16324, 60.75: 16404, 61.00: 16483, 61.25: 16563, 61.50: 16643, 61.75: 16723,
    62.00: 16802, 62.25: 16882, 62.50: 16961, 62.75: 17041, 63.00: 17120, 63.25: 17200, 63.50: 17279, 63.75: 17358,
    64.00: 17438, 64.25: 17517, 64.50: 17596, 64.75: 17675, 65.00: 17754, 65.25: 17833, 65.50: 17912, 65.75: 17990,
    66.00: 18069, 66.25: 18148, 66.50: 18226, 66.75: 18305, 67.00: 18383, 67.25: 18461, 67.50: 18540, 67.75: 18618,
    68.00: 18696, 68.25: 18774, 68.50: 18852, 68.75: 18929, 69.00: 19007, 69.25: 19085, 69.50: 19162, 69.75: 19240,
    70.00: 19317, 70.25: 19394, 70.50: 19471, 70.75: 19548, 71.00: 19625, 71.25: 19702, 71.50: 19779, 71.75: 19855,
    72.00: 19932, 72.25: 20008, 72.50: 20084, 72.75: 20161, 73.00: 20237, 73.25: 20313, 73.50: 20388, 73.75: 20464,
    74.00: 20539, 74.25: 20615, 74.50: 20690, 74.75: 20765, 75.00: 20840, 75.25: 20915, 75.50: 20990, 75.75: 21064,
    76.00: 21139, 76.25: 21213, 76.50: 21287, 76.75: 21361, 77.00: 21435, 77.25: 21509, 77.50: 21583, 77.75: 21656,
    78.00: 21729, 78.25: 21802, 78.50: 21875, 78.75: 21948, 79.00: 22021, 79.25: 22093, 79.50: 22165, 79.75: 22238,
    80.00: 22309, 80.25: 22381, 80.50: 22453, 80.75: 22524, 81.00: 22595, 81.25: 22667, 81.50: 22737, 81.75: 22808,
    82.00: 22879, 82.25: 22949, 82.50: 23019, 82.75: 23089, 83.00: 23159, 83.25: 23228, 83.50: 23298, 83.75: 23367,
    84.00: 23436, 84.25: 23504, 84.50: 23573, 84.75: 23641, 85.00: 23709, 85.25: 23777, 85.50: 23845, 85.75: 23912,
    86.00: 23979, 86.25: 24046, 86.50: 24113, 86.75: 24180, 87.00: 24246, 87.25: 24312, 87.50: 24378, 87.75: 24443,
    88.00: 24509, 88.25: 24574, 88.50: 24638, 88.75: 24703, 89.00: 24767, 89.25: 24831, 89.50: 24895, 89.75: 24959,
    90.00: 25022, 90.25: 25085, 90.50: 25148, 90.75: 25210, 91.00: 25272, 91.25: 25334, 91.50: 25396, 91.75: 25457,
    92.00: 25518, 92.25: 25579, 92.50: 25639, 92.75: 25700, 93.00: 25759, 93.25: 25819, 93.50: 25878, 93.75: 25937,
    94.00: 25996, 94.25: 26054, 94.50: 26112, 94.75: 26170, 95.00: 26227, 95.25: 26284, 95.50: 26341, 95.75: 26397,
    96.00: 26453, 96.25: 26509, 96.50: 26564, 96.75: 26619, 97.00: 26673, 97.25: 26728, 97.50: 26781, 97.75: 26835,
    98.00: 26888, 98.25: 26941, 98.50: 26993, 98.75: 27045, 99.00: 27096, 99.25: 27147, 99.50: 27198, 99.75: 27248,
    100.00: 27298, 100.25: 27348, 100.50: 27397, 100.75: 27445, 101.00: 27494, 101.25: 27541, 101.50: 27589, 101.75: 27635,
    102.00: 27682, 102.25: 27728, 102.50: 27773, 102.75: 27818, 103.00: 27862, 103.25: 27906, 103.50: 27949, 103.75: 27992,
    104.00: 28035, 104.25: 28077, 104.50: 28118, 104.75: 28159, 105.00: 28199, 105.25: 28239, 105.50: 28278, 105.75: 28316,
    106.00: 28355, 106.25: 28392, 106.50: 28429, 106.75: 28466, 107.00: 28502, 107.25: 28538, 107.50: 28573, 107.75: 28607,
    108.00: 28641, 108.25: 28675, 108.50: 28708, 108.75: 28740, 109.00: 28772, 109.25: 28804, 109.50: 28835, 109.75: 28865,
    110.00: 28895, 110.25: 28924, 110.50: 28953, 110.75: 28981, 111.00: 29009, 111.25: 29036, 111.50: 29063, 111.75: 29089,
    112.00: 29115, 112.25: 29140, 112.50: 29165, 112.75: 29190, 113.00: 29214, 113.25: 29237, 113.50: 29260, 113.75: 29283,
    114.00: 29305, 114.25: 29326, 114.50: 29347, 114.75: 29368, 115.00: 29388, 115.25: 29408, 115.50: 29427, 115.75: 29446,
    116.00: 29464, 116.25: 29482, 116.50: 29499, 116.75: 29516, 117.00: 29532,
}

tanks = {
    "SKSX117122": sksx117122_data,
    "TCLX290169": tclx290169_data
}

def inches_to_cm(inches):
    return inches * 2.54

def cm_to_inches(cm):
    return cm / 2.54

def interpolate(data, height):
    keys = sorted(data.keys())
    if height in data:
        return data[height]
    if height < keys[0] or height > keys[-1]:
        return None
    for i in range(len(keys)-1):
        if keys[i] < height < keys[i+1]:
            x0, x1 = keys[i], keys[i+1]
            y0, y1 = data[x0], data[x1]
            return y0 + (height - x0) * (y1 - y0) / (x1 - x0)
    return None

st.title("Railcar Tank Volume Calculator")

tank_name = st.selectbox("Select Tank", list(tanks.keys()))

height_unit = st.radio("Height input unit:", ("inches", "cm"))

volume_unit = st.radio("Volume output unit:", ("gallons", "litres"))

height_input = st.number_input(f"Enter height in {height_unit} (0 - 117):", 0.0, 117.0, step=0.25, format="%.2f")

# convert input height to inches for data lookup
height_in_inches = cm_to_inches(height_input) if height_unit == "cm" else height_input

volume_gallons = interpolate(tanks[tank_name], height_in_inches)

if volume_gallons is None:
    st.error("Height out of range for selected tank.")
else:
    if volume_unit == "litres":
        volume = volume_gallons * 3.78541
    else:
        volume = volume_gallons
    st.write(f"Volume at {height_input:.2f} {height_unit} for tank {tank_name}: {volume:.2f} {volume_unit}")
