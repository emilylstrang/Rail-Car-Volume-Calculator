import streamlit as st

# Full data for SKSX117122 - Inches to Gallons (exact from your data)
SKSX117122 = {
    0.25: 23,
    0.5: 47,
    0.75: 72,
    1.00: 98,
    1.25: 125,
    1.50: 153,
    1.75: 182,
    2.00: 212,
    2.25: 242,
    2.50: 274,
    2.75: 306,
    3.00: 339,
    3.25: 373,
    3.50: 408,
    3.75: 443,
    4.00: 479,
    4.25: 516,
    4.50: 553,
    4.75: 591,
    5.00: 629,
    5.25: 669,
    5.50: 709,
    5.75: 749,
    6.00: 790,
    6.25: 832,
    6.50: 874,
    6.75: 916,
    7.00: 960,
    7.25: 1004,
    7.50: 1048,
    7.75: 1093,
    8.00: 1138,
    8.25: 1184,
    8.50: 1230,
    8.75: 1277,
    9.00: 1325,
    9.25: 1373,
    9.50: 1421,
    9.75: 1470,
    10.00: 1519,
    10.25: 1568,
    10.50: 1619,
    10.75: 1669,
    11.00: 1720,
    11.25: 1772,
    11.50: 1823,
    11.75: 1876,
    12.00: 1928,
    12.25: 1981,
    12.50: 2035,
    12.75: 2089,
    13.00: 2143,
    13.25: 2198,
    13.50: 2253,
    13.75: 2308,
    14.00: 2364,
    14.25: 2420,
    14.50: 2476,
    14.75: 2533,
    15.00: 2591,
    15.25: 2648,
    15.50: 2706,
    15.75: 2764,
    16.00: 2823,
    16.25: 2882,
    16.50: 2941,
    16.75: 3001,
    17.00: 3061,
    17.25: 3121,
    17.50: 3181,
    17.75: 3242,
    18.00: 3303,
    18.25: 3365,
    18.50: 3427,
    18.75: 3489,
    19.00: 3551,
    19.25: 3614,
    19.50: 3677,
    19.75: 3740,
    20.00: 3804,
    20.25: 3867,
    20.50: 3931,
    20.75: 3996,
    21.00: 4060,
    21.25: 4125,
    21.50: 4191,
    21.75: 4256,
    22.00: 4322,
    22.25: 4388,
    22.50: 4454,
    22.75: 4520,
    23.00: 4587,
    23.25: 4654,
    23.50: 4721,
    23.75: 4789,
    24.00: 4856,
    24.25: 4924,
    24.50: 4992,
    24.75: 5061,
    25.00: 5129,
    25.25: 5198,
    25.50: 5267,
    25.75: 5337,
    26.00: 5406,
    26.25: 5476,
    26.50: 5546,
    26.75: 5616,
    27.00: 5686,
    27.25: 5757,
    27.50: 5828,
    27.75: 5899,
    28.00: 5970,
    28.25: 6041,
    28.50: 6113,
    28.75: 6185,
    29.00: 6256,
    29.25: 6329,
    29.50: 6401,
    29.75: 6473,
    30.00: 6546,
    30.25: 6619,
    30.50: 6692,
    30.75: 6765,
    31.00: 6839,
    31.25: 6912,
    31.50: 6986,
    31.75: 7060,
    32.00: 7134,
    32.25: 7208,
    32.50: 7283,
    32.75: 7357,
    33.00: 7432,
    33.25: 7507,
    33.50: 7582,
    33.75: 7657,
    34.00: 7732,
    34.25: 7808,
    34.50: 7883,
    34.75: 7959,
    35.00: 8035,
    35.25: 8111,
    35.50: 8187,
    35.75: 8264,
    36.00: 8340,
    36.25: 8417,
    36.50: 8493,
    36.75: 8570,
    37.00: 8647,
    37.25: 8724,
    37.50: 8802,
    37.75: 8879,
    38.00: 8956,
    38.25: 9034,
    38.50: 9112,
    38.75: 9189,
    39.00: 9267,
    39.25: 9345,
    39.50: 9423,
    39.75: 9502,
    40.00: 9580,
    40.25: 9658,
    40.50: 9737,
    40.75: 9816,
    41.00: 9894,
    41.25: 9973,
    41.50: 10052,
    41.75: 10131,
    42.00: 10210,
    42.25: 10290,
    42.50: 10369,
    42.75: 10448,
    43.00: 10528,
    43.25: 10607,
    43.50: 10687,
    43.75: 10767,
    44.00: 10847,
    44.25: 10926,
    44.50: 11006,
    44.75: 11086,
    45.00: 11166,
    45.25: 11247,
    45.50: 11327,
    45.75: 11407,
    46.00: 11487,
    46.25: 11568,
    46.50: 11648,
    46.75: 11729,
    47.00: 11809,
    47.25: 11890,
    47.50: 11971,
    47.75: 12051,
    48.00: 12132,
    48.25: 12213,
    48.50: 12294,
    48.75: 12375,
    49.00: 12456,
    49.25: 12537,
    49.50: 12618,
    49.75: 12699,
    50.00: 12780,
    50.25: 12861,
    50.50: 12943,
    50.75: 13024,
    51.00: 13105,
    51.25: 13186,
    51.50: 13268,
    51.75: 13349,
    52.00: 13430,
    52.25: 13512,
    52.50: 13593,
    52.75: 13675,
    53.00: 13756,
    53.25: 13837,
    53.50: 13919,
    53.75: 14000,
    54.00: 14082,
    54.25: 14163,
    54.50: 14245,
    54.75: 14326,
    55.00: 14408,
    55.25: 14490,
    55.50: 14571,
    55.75: 14653,
    56.00: 14734,
    56.25: 14816,
    56.50: 14897,
    56.75: 14979,
    57.00: 15060,
    57.25: 15142,
    57.50: 15223,
    57.75: 15305,
    58.00: 15386,
    58.25: 15468,
    58.50: 15549,
    58.75: 15631,
    59.00: 15712,
    59.25: 15793,
    59.50: 15875,
    59.75: 15956,
    60.00: 16037,
    60.25: 16119,
    60.50: 16200,
    60.75: 16281,
    61.00: 16362,
    61.25: 16443,
    61.50: 16524,
    61.75: 16605,
    62.00: 16686,
    62.25: 16767,
    62.50: 16848,
    62.75: 16929,
    63.00: 17010,
    63.25: 17091,
    63.50: 17172,
    63.75: 17252,
    64.00: 17333,
    64.25: 17413,
    64.50: 17494,
    64.75: 17574,
    65.00: 17655,
    65.25: 17735,
    65.50: 17815,
    65.75: 17896,
    66.00: 17976,
    66.25: 18056,
    66.50: 18136,
    66.75: 18216,
    67.00: 18296,
    67.25: 18375,
    67.50: 18455,
    67.75: 18535,
    68.00: 18614,
    68.25: 18694,
    68.50: 18774,
    68.75: 18852,
    69.00: 18932,
    69.25: 19011,
    69.50: 19090,
    69.75: 19169,
    70.00: 19248,
    70.25: 19326,
    70.50: 19405,
    70.75: 19484,
    71.00: 19562,
    71.25: 19640,
    71.50: 19719,
    71.75: 19797,
    72.00: 19875,
    72.25: 19953,
    72.50: 20030,
    72.75: 20108,
    73.00: 20186,
    73.25: 20263,
    73.50: 20341,
    73.75: 20418,
    74.00: 20495,
    74.25: 20572,
    74.50: 20649,
    74.75: 20725,
    75.00: 20802,
    75.25: 20878,
    75.50: 20955,
    75.75: 21031,
    76.00: 21107,
    76.25: 21183,
    76.50: 21259,
    76.75: 21334,
    77.00: 21410,
    77.25: 21485,
    77.50: 21560,
    77.75: 21635,
    78.00: 21710,
    78.25: 21785,
    78.50: 21859,
    78.75: 21934,
    79.00: 22008,
    79.25: 22082,
    79.50: 22156,
    79.75: 22230,
    80.00: 22303,
    80.25: 22377,
    80.50: 22450,
    80.75: 22523,
    81.00: 22596,
    81.25: 22669,
    81.50: 22741,
    81.75: 22813,
    82.00: 22886,
    82.25: 22957,
    82.50: 23029,
    82.75: 23101,
    83.00: 23172,
    83.25: 23243,
    83.50: 23314,
    83.75: 23385,
    84.00: 23456,
    84.25: 23526,
    84.50: 23596,
    84.75: 23666,
    85.00: 23736,
    85.25: 23805,
    85.50: 23875,
    85.75: 23944,
    86.00: 24013,
    86.25: 24081,
    86.50: 24150,
    86.75: 24218,
    87.00: 24286,
    87.25: 24353,
    87.50: 24421,
    87.75: 24488,
    88.00: 24555,
    88.25: 24622,
    88.50: 24688,
    88.75: 24754,
    89.00: 24820,
    89.25: 24886,
    89.50: 24952,
    89.75: 25017,
    90.00: 25082,
    90.25: 25146,
    90.50: 25211,
    90.75: 25275,
    91.00: 25339,
    91.25: 25402,
    91.50: 25466,
    91.75: 25529,
    92.00: 25591,
    92.25: 25654,
    92.50: 25716,
    92.75: 25778,
    93.00: 25839,
    93.25: 25900,
    93.50: 25961,
    93.75: 26022,
    94.00: 26082,
    94.25: 26142,
    94.50: 26202,
    94.75: 26261,
    95.00: 26320,
    95.25: 26379,
    95.50: 26437,
    95.75: 26495,
    96.00: 26553,
    96.25: 26610,
    96.50: 26667,
    96.75: 26723,
    97.00: 26779,
    97.25: 26835,
    97.50: 26891,
    97.75: 26946,
    98.00: 27001,
    98.25: 27055,
    98.50: 27109,
    98.75: 27162,
    99.00: 27215,
    99.25: 27268,
    99.50: 27321,
    99.75: 27373,
    100.00: 27424,
    100.25: 27475,
    100.50: 27526,
    100.75: 27576,
    101.00: 27626,
    101.25: 27676,
    101.50: 27725,
    101.75: 27774,
    102.00: 27823,
    102.25: 27871,
    102.50: 27919,
    102.75: 27966,
    103.00: 28013,
    103.25: 28060,
    103.50: 28106,
    103.75: 28152,
    104.00: 28198,
    104.25: 28243,
    104.50: 28288,
    104.75: 28333,
    105.00: 28377,
    105.25: 28421,
    105.50: 28464,
    105.75: 28507,
    106.00: 28550,
    106.25: 28592,
    106.50: 28633,
    106.75: 28674,
    107.00: 28715,
    107.25: 28755,
    107.50: 28795,
    107.75: 28834,
    108.00: 28873,
    108.25: 28912,
    108.50: 28950,
    108.75: 28988,
    109.00: 29026,
    109.25: 29063,
    109.50: 29100,
    109.75: 29137,
    110.00: 29173,
    110.25: 29209,
    110.50: 29244,
    110.75: 29279,
    111.00: 29313,
    111.25: 29347,
    111.50: 29381,
    111.75: 29414,
    112.00: 29447,
    112.25: 29479,
    112.50: 29511,
    112.75: 29543,
    113.00: 29574,
    113.25: 29605,
    113.50: 29636,
    113.75: 29666,
    114.00: 29695,
    114.25: 29725,
    114.50: 29754,
    114.75: 29783,
    115.00: 29811,
    115.25: 29840,
    115.50: 29868,
    115.75: 29895,
    116.00: 29923,
    116.25: 29950,
    116.50: 29976
}

# Full data for TCLX290169 (exact from your data)
TCLX290169 = {
    0.0: 0,
    0.25: 30,
    0.5: 60,
    0.75: 91,
    1.0: 123,
    1.25: 156,
    1.5: 190,
    1.75: 224,
    2.0: 259,
    2.25: 295,
    2.5: 331,
    2.75: 368,
    3.0: 405,
    3.25: 444,
    3.5: 482,
    3.75: 522,
    4.0: 562,
    4.25: 602,
    4.5: 643,
    4.75: 685,
    5.0: 727,
    5.25: 770,
    5.5: 813,
    5.75: 857,
    6.0: 901,
    6.25: 946,
    6.5: 991,
    6.75: 1037,
    7.0: 1083,
    7.25: 1130,
    7.5: 1177,
    7.75: 1225,
    8.0: 1273,
    8.25: 1321,
    8.5: 1370,
    8.75: 1420,
    9.0: 1469,
    9.25: 1520,
    9.5: 1570,
    9.75: 1621,
    10.0: 1673,
    10.25: 1725,
    10.5: 1777,
    10.75: 1829,
    11.0: 1882,
    11.25: 1936,
    11.5: 1990,
    11.75: 2044,
    12.0: 2098,
    12.25: 2153,
    12.5: 2208,
    12.75: 2264,
    13.0: 2320,
    13.25: 2376,
    13.5: 2433,
    13.75: 2490,
    14.0: 2547,
    14.25: 2605,
    14.5: 2663,
    14.75: 2721,
    15.0: 2780,
    15.25: 2838,
    15.5: 2898,
    15.75: 2957,
    16.0: 3017,
    16.25: 3077,
    16.5: 3138,
    16.75: 3198,
    17.0: 3260,
    17.25: 3321,
    17.5: 3382,
    17.75: 3444,
    18.0: 3507,
    18.25: 3569,
    18.5: 3632,
    18.75: 3695,
    19.0: 3758,
    19.25: 3822,
    19.5: 3885,
    19.75: 3949,
    20.0: 4014,
    20.25: 4078,
    20.5: 4143,
    20.75: 4208,
    21.0: 4274,
    21.25: 4339,
    21.5: 4405,
    21.75: 4471,
    22.0: 4537,
    22.25: 4604,
    22.5: 4671,
    22.75: 4738,
    23.0: 4805,
    23.25: 4872,
    23.5: 4940,
    23.75: 5008,
    24.0: 5076,
    24.25: 5144,
    24.5: 5213,
    24.75: 5281,
    25.0: 5350,
    25.25: 5419,
    25.5: 5489,
    25.75: 5558,
    26.0: 5628,
    26.25: 5698,
    26.5: 5768,
    26.75: 5838,
    27.0: 5909,
    27.25: 5980,
    27.5: 6051,
    27.75: 6122,
    28.0: 6193,
    28.25: 6264,
    28.5: 6336,
    28.75: 6408,
    29.0: 6480,
    29.25: 6552,
    29.5: 6624,
    29.75: 6697,
    30.0: 6769,
    30.25: 6842,
    30.5: 6915,
    30.75: 6988,
    31.0: 7061,
    31.25: 7135,
    31.5: 7208,
    31.75: 7282,
    32.0: 7356,
    32.25: 7430,
    32.5: 7504,
    32.75: 7579,
    33.0: 7653,
    33.25: 7728,
    33.5: 7802,
    33.75: 7877,
    34.0: 7952,
    34.25: 8028,
    34.5: 8103,
    34.75: 8178,
    35.0: 8254,
    35.25: 8329,
    35.5: 8405,
    35.75: 8481,
    36.0: 8557,
    36.25: 8633,
    36.5: 8710,
    36.75: 8786,
    37.0: 8862,
    37.25: 8939,
    37.5: 9016,
    37.75: 9093,
    38.0: 9170,
    38.25: 9247,
    38.5: 9324,
    38.75: 9401,
    39.0: 9478,
    39.25: 9556,
    39.5: 9633,
    39.75: 9711,
    40.0: 9789,
    40.25: 9866,
    40.5: 9944,
    40.75: 10022,
    41.0: 10100,
    41.25: 10178,
    41.5: 10257,
    41.75: 10335,
    42.0: 10413,
    42.25: 10492,
    42.5: 10570,
    42.75: 10649,
    43.0: 10728,
    43.25: 10807,
    43.5: 10885,
    43.75: 10964,
    44.0: 11043,
    44.25: 11122,
    44.5: 11201,
    44.75: 11281,
    45.0: 11360,
    45.25: 11439,
    45.5: 11518,
    45.75: 11598,
    46.0: 11677,
    46.25: 11757,
    46.5: 11836,
    46.75: 11916,
    47.0: 11996,
    47.25: 12075,
    47.5: 12155,
    47.75: 12235,
    48.0: 12315,
    48.25: 12395,
    48.5: 12474,
    48.75: 12554,
    49.0: 12634,
    49.25: 12714,
    49.5: 12794,
    49.75: 12874,
    50.0: 12955,
    50.25: 13035,
    50.5: 13115,
    50.75: 13195,
    51.0: 13275,
    51.25: 13355,
    51.5: 13436,
    51.75: 13516,
    52.0: 13596,
    52.25: 13676,
    52.5: 13757,
    52.75: 13837,
    53.0: 13917,
    53.25: 13998,
    53.5: 14078,
    53.75: 14158,
    54.0: 14239,
    54.25: 14319,
    54.5: 14399,
    54.75: 14480,
    55.0: 14560,
    55.25: 14640,
    55.5: 14721,
    55.75: 14801,
    56.0: 14881,
    56.25: 14962,
    56.5: 15042,
    56.75: 15122,
    57.0: 15202,
    57.25: 15283,
    57.5: 15363,
    57.75: 15443,
    58.0: 15523,
    58.25: 15604,
    58.5: 15684,
    58.75: 15764,
    59.0: 15844,
    59.25: 15924,
    59.5: 16004,
    59.75: 16084,
    60.0: 16164,
    60.25: 16244,
    60.5: 16324,
    60.75: 16404,
    61.0: 16483,
    61.25: 16563,
    61.5: 16643,
    61.75: 16723,
    62.0: 16802,
    62.25: 16882,
    62.5: 16961,
    62.75: 17041,
    63.0: 17120,
    63.25: 17200,
    63.5: 17279,
    63.75: 17358,
    64.0: 17438,
    64.25: 17517,
    64.5: 17596,
    64.75: 17675,
    65.0: 17754,
    65.25: 17833,
    65.5: 17912,
    65.75: 17990,
    66.0: 18069,
    66.25: 18148,
    66.5: 18226,
    66.75: 18305,
    67.0: 18383,
    67.25: 18461,
    67.5: 18540,
    67.75: 18618,
    68.0: 18696,
    68.25: 18774,
    68.5: 18852,
    68.75: 18929,
    69.0: 19007,
    69.25: 19085,
    69.5: 19162,
    69.75: 19240,
    70.0: 19317,
    70.25: 19394,
    70.5: 19471,
    70.75: 19548,
    71.0: 19625,
    71.25: 19702,
    71.5: 19779,
    71.75: 19855,
    72.0: 19932,
    72.25: 20008,
    72.5: 20084,
    72.75: 20161,
    73.0: 20237,
    73.25: 20313,
    73.5: 20388,
    73.75: 20464,
    74.0: 20539,
    74.25: 20615,
    74.5: 20690,
    74.75: 20765,
    75.0: 20840,
    75.25: 20915,
    75.5: 20990,
    75.75: 21064,
    76.0: 21139,
    76.25: 21213,
    76.5: 21287,
    76.75: 21361,
    77.0: 21435,
    77.25: 21509,
    77.5: 21583,
    77.75: 21656,
    78.0: 21729,
    78.25: 21802,
    78.5: 21875,
    78.75: 21948,
    79.0: 22021,
    79.25: 22093,
    79.5: 22165,
    79.75: 22238,
    80.0: 22309,
    80.25: 22381,
    80.5: 22453,
    80.75: 22524,
    81.0: 22595,
    81.25: 22667,
    81.5: 22737,
    81.75: 22808,
    82.0: 22879,
    82.25: 22949,
    82.5: 23019,
    82.75: 23089,
    83.0: 23159,
    83.25: 23228,
    83.5: 23298,
    83.75: 23367,
    84.0: 23436,
    84.25: 23504,
    84.5: 23573,
    84.75: 23641,
    85.0: 23709,
    85.25: 23777,
    85.5: 23845,
    85.75: 23912,
    86.0: 23979,
    86.25: 24046,
    86.5: 24113,
    86.75: 24180,
    87.0: 24246,
    87.25: 24312,
    87.5: 24378,
    87.75: 24444,
    88.0: 24510,
    88.25: 24575,
    88.5: 24641,
    88.75: 24706,
    89.0: 24771,
    89.25: 24835,
    89.5: 24900,
    89.75: 24964,
    90.0: 25028,
    90.25: 25092,
    90.5: 25156,
    90.75: 25219,
    91.0: 25283,
    91.25: 25346,
    91.5: 25409,
    91.75: 25472,
    92.0: 25534,
    92.25: 25597,
    92.5: 25659,
    92.75: 25721,
    93.0: 25783,
    93.25: 25845,
    93.5: 25906,
    93.75: 25967,
    94.0: 26029,
    94.25: 26089,
    94.5: 26150,
    94.75: 26210,
    95.0: 26271,
    95.25: 26331,
    95.5: 26391,
    95.75: 26451,
    96.0: 26511,
    96.25: 26570,
    96.5: 26630,
    96.75: 26689,
    97.0: 26748,
    97.25: 26806,
    97.5: 26865,
    97.75: 26924,
    98.0: 26982,
    98.25: 27040,
    98.5: 27098,
    98.75: 27156,
    99.0: 27214,
    99.25: 27271,
    99.5: 27328,
    99.75: 27385,
    100.0: 27442,
    100.25: 27499,
    100.5: 27555,
    100.75: 27612,
    101.0: 27668,
    101.25: 27724,
    101.5: 27779,
    101.75: 27835,
    102.0: 27890,
    102.25: 27945,
    102.5: 28000,
    102.75: 28055,
    103.0: 28109,
    103.25: 28163,
    103.5: 28218,
    103.75: 28272,
    104.0: 28326,
    104.25: 28379,
    104.5: 28433,
    104.75: 28486,
    105.0: 28539,
    105.25: 28592,
    105.5: 28645,
    105.75: 28697,
    106.0: 28750,
    106.25: 28802,
    106.5: 28854,
    106.75: 28906,
    107.0: 28958,
    107.25: 29010,
    107.5: 29061,
    107.75: 29112,
    108.0: 29163,
    108.25: 29214,
    108.5: 29265,
    108.75: 29315,
    109.0: 29365,
    109.25: 29415,
    109.5: 29465,
    109.75: 29515,
    110.0: 29564,
    110.25: 29614,
    110.5: 29663,
    110.75: 29712,
    111.0: 29761,
    111.25: 29810,
    111.5: 29858,
    111.75: 29907,
    112.0: 29955,
    112.25: 30003,
    112.5: 30051,
    112.75: 30099,
    113.0: 30147,
    113.25: 30194,
    113.5: 30242,
    113.75: 30289,
    114.0: 30336,
    114.25: 30383,
    114.5: 30430,
    114.75: 30477,
    115.0: 30524,
    115.25: 30570,
    115.5: 30617,
    115.75: 30663,
    116.0: 30709,
    116.25: 30755,
    116.5: 30801
}

def interpolate(value, data_dict):
    """Linear interpolate if exact value not found."""
    if value in data_dict:
        return data_dict[value]
    sorted_keys = sorted(data_dict.keys())
    if value < sorted_keys[0] or value > sorted_keys[-1]:
        return None  # out of range
    for i in range(len(sorted_keys) - 1):
        low = sorted_keys[i]
        high = sorted_keys[i + 1]
        if low < value < high:
            low_val = data_dict[low]
            high_val = data_dict[high]
            fraction = (value - low) / (high - low)
            return low_val + fraction * (high_val - low_val)
    return None

def gallons_to_liters(gallons):
    return gallons * 3.78541

def liters_to_gallons(liters):
    return liters / 3.78541

st.title("Railcar Tank Volume Calculator")

tank_choice = st.selectbox("Select Tank Profile", ("SKSX117122", "TCLX290169"))

unit_input = st.radio("Input Height Unit", ("inches", "cm"))

unit_output = st.radio("Output Volume Unit", ("gallons", "liters"))

height_input = st.number_input(f"Enter height in {unit_input}", min_value=0.0, step=0.25, format="%.2f")

# Convert input to inches if needed
if unit_input == "cm":
    height_in = height_input / 2.54
else:
    height_in = height_input

# Choose the dictionary
if tank_choice == "SKSX117122":
    data_dict = SKSX117122
else:
    data_dict = TCLX290169

volume_gallons = interpolate(height_in, data_dict)

if volume_gallons is None:
    st.error("Height out of range for this tank profile.")
else:
    if unit_output == "liters":
        volume = gallons_to_liters(volume_gallons)
        st.success(f"Volume at {height_input:.2f} {unit_input} in {tank_choice}: {volume:.2f} liters")
    else:
        st.success(f"Volume at {height_input:.2f} {unit_input} in {tank_choice}: {volume_gallons:.2f} gallons")
