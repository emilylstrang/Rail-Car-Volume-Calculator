import streamlit as st

# Full data for SKSX117122 exactly as you pasted (in inches: gallons)
SKSX117122 = {
    0.25: 23, 0.5: 47, 0.75: 72, 1.0: 98, 1.25: 125, 1.5: 153, 1.75: 182,
    2.0: 212, 2.25: 242, 2.5: 274, 2.75: 306, 3.0: 339, 3.25: 373, 3.5: 408,
    3.75: 443, 4.0: 479, 4.25: 516, 4.5: 553, 4.75: 591, 5.0: 629, 5.25: 669,
    5.5: 709, 5.75: 749, 6.0: 790, 6.25: 832, 6.5: 874, 6.75: 916, 7.0: 960,
    7.25: 1004, 7.5: 1048, 7.75: 1093, 8.0: 1138, 8.25: 1184, 8.5: 1230,
    8.75: 1277, 9.0: 1325, 9.25: 1373, 9.5: 1421, 9.75: 1470, 10.0: 1519,
    10.25: 1568, 10.5: 1619, 10.75: 1669, 11.0: 1720, 11.25: 1772, 11.5: 1823,
    11.75: 1876, 12.0: 1928, 12.25: 1981, 12.5: 2035, 12.75: 2089, 13.0: 2143,
    13.25: 2198, 13.5: 2253, 13.75: 2308, 14.0: 2364, 14.25: 2420, 14.5: 2476,
    14.75: 2533, 15.0: 2591, 15.25: 2648, 15.5: 2706, 15.75: 2764, 16.0: 2823,
    16.25: 2882, 16.5: 2941, 16.75: 3001, 17.0: 3061, 17.25: 3121, 17.5: 3181,
    17.75: 3242, 18.0: 3303, 18.25: 3365, 18.5: 3427, 18.75: 3489, 19.0: 3551,
    19.25: 3614, 19.5: 3677, 19.75: 3740, 20.0: 3804, 20.25: 3867, 20.5: 3931,
    20.75: 3996, 21.0: 4060, 21.25: 4125, 21.5: 4191, 21.75: 4256, 22.0: 4322,
    22.25: 4388, 22.5: 4454, 22.75: 4520, 23.0: 4587, 23.25: 4654, 23.5: 4721,
    23.75: 4789, 24.0: 4856, 24.25: 4924, 24.5: 4992, 24.75: 5061, 25.0: 5129,
    25.25: 5198, 25.5: 5267, 25.75: 5337, 26.0: 5406, 26.25: 5476, 26.5: 5546,
    26.75: 5616, 27.0: 5686, 27.25: 5757, 27.5: 5828, 27.75: 5899, 28.0: 5970,
    28.25: 6041, 28.5: 6113, 28.75: 6185, 29.0: 6256, 29.25: 6329, 29.5: 6401,
    29.75: 6473, 30.0: 6546, 30.25: 6619, 30.5: 6692, 30.75: 6765, 31.0: 6839,
    31.25: 6912, 31.5: 6986, 31.75: 7060, 32.0: 7134, 32.25: 7208, 32.5: 7283,
    32.75: 7357, 33.0: 7432, 33.25: 7507, 33.5: 7582, 33.75: 7657, 34.0: 7732,
    34.25: 7808, 34.5: 7883, 34.75: 7959, 35.0: 8035, 35.25: 8111, 35.5: 8187,
    35.75: 8264, 36.0: 8340, 36.25: 8417, 36.5: 8493, 36.75: 8570, 37.0: 8647,
    37.25: 8724, 37.5: 8802, 37.75: 8879, 38.0: 8956, 38.25: 9034, 38.5: 9112,
    38.75: 9189, 39.0: 9267, 39.25: 9345, 39.5: 9423, 39.75: 9502, 40.0: 9580,
    40.25: 9658, 40.5: 9737, 40.75: 9816, 41.0: 9894, 41.25: 9973, 41.5: 10052,
    41.75: 10131, 42.0: 10210, 42.25: 10290, 42.5: 10369, 42.75: 10448,
    43.0: 10528, 43.25: 10607, 43.5: 10687, 43.75: 10767, 44.0: 10847,
    44.25: 10926, 44.5: 11006, 44.75: 11086, 45.0: 11166, 45.25: 11247,
    45.5: 11327, 45.75: 11407, 46.0: 11487, 46.25: 11568, 46.5: 11648,
    46.75: 11729, 47.0: 11809, 47.25: 11890, 47.5: 11971, 47.75: 12051,
    48.0: 12132, 48.25: 12213, 48.5: 12294, 48.75: 12375, 49.0: 12456,
    49.25: 12537, 49.5: 12618, 49.75: 12699, 50.0: 12780, 50.25: 12861,
    50.5: 12943, 50.75: 13024, 51.0: 13105, 51.25: 13186, 51.5: 13268,
    51.75: 13349, 52.0: 13430, 52.25: 13512, 52.5: 13593, 52.75: 13675,
    53.0: 13756, 53.25: 13837, 53.5: 13919, 53.75: 14000, 54.0: 14082,
    54.25: 14163, 54.5: 14245, 54.75: 14326, 55.0: 14408, 55.25: 14490,
    55.5: 14571, 55.75: 14653, 56.0: 14734, 56.25: 14816, 56.5: 14897,
    56.75: 14979, 57.0: 15060, 57.25: 15142, 57.5: 15223, 57.75: 15305,
    58.0: 15386, 58.25: 15468, 58.5: 15549, 58.75: 15631, 59.0: 15712,
    59.25: 15794, 59.5: 15875, 59.75: 15957, 60.0: 16038, 60.25: 16120,
    60.5: 16201, 60.75: 16283, 61.0: 16364, 61.25: 16446, 61.5: 16527,
    61.75: 16609, 62.0: 16690, 62.25: 16772, 62.5: 16853, 62.75: 16935,
    63.0: 17016, 63.25: 17098, 63.5: 17179, 63.75: 17260, 64.0: 17342,
    64.25: 17423, 64.5: 17504, 64.75: 17585, 65.0: 17666, 65.25: 17747,
    65.5: 17828, 65.75: 17909, 66.0: 17990, 66.25: 18071, 66.5: 18152,
    66.75: 18233, 67.0: 18314, 67.25: 18395, 67.5: 18476, 67.75: 18557,
    68.0: 18638, 68.25: 18719, 68.5: 18800, 68.75: 18881, 69.0: 18962,
    69.25: 19043, 69.5: 19124, 69.75: 19205, 70.0: 19286, 70.25: 19367,
    70.5: 19448, 70.75: 19529, 71.0: 19610, 71.25: 19691, 71.5: 19772,
    71.75: 19853, 72.0: 19934, 72.25: 20015, 72.5: 20096, 72.75: 20177,
    73.0: 20258, 73.25: 20339, 73.5: 20420, 73.75: 20501, 74.0: 20582,
    74.25: 20663, 74.5: 20744, 74.75: 20825, 75.0: 20906, 75.25: 20987,
    75.5: 21068, 75.75: 21149, 76.0: 21230, 76.25: 21311, 76.5: 21392,
    76.75: 21473, 77.0: 21554, 77.25: 21635, 77.5: 21716, 77.75: 21797,
    78.0: 21878, 78.25: 21959, 78.5: 22040, 78.75: 22121, 79.0: 22202,
    79.25: 22283, 79.5: 22364, 79.75: 22445, 80.0: 22526, 80.25: 22607,
    80.5: 22688, 80.75: 22769, 81.0: 22850, 81.25: 22931, 81.5: 23012,
    81.75: 23093, 82.0: 23174, 82.25: 23255, 82.5: 23336, 82.75: 23417,
    83.0: 23498, 83.25: 23579, 83.5: 23660, 83.75: 23741, 84.0: 23822,
    84.25: 23903, 84.5: 23984, 84.75: 24065, 85.0: 24146, 85.25: 24227,
    85.5: 24308, 85.75: 24389, 86.0: 24470, 86.25: 24551, 86.5: 24632,
    86.75: 24713, 87.0: 24794, 87.25: 24875, 87.5: 24956, 87.75: 25037,
    88.0: 25118, 88.25: 25199, 88.5: 25280, 88.75: 25361, 89.0: 25442,
    89.25: 25523, 89.5: 25604, 89.75: 25685, 90.0: 25766, 90.25: 25847,
    90.5: 25928, 90.75: 26009, 91.0: 26090, 91.25: 26171, 91.5: 26252,
    91.75: 26333, 92.0: 26414, 92.25: 26495, 92.5: 26576, 92.75: 26657,
    93.0: 26738, 93.25: 26819, 93.5: 26900, 93.75: 26981, 94.0: 27062,
    94.25: 27143, 94.5: 27224, 94.75: 27305, 95.0: 27386, 95.25: 27467,
    95.5: 27548, 95.75: 27629, 96.0: 27710, 96.25: 27791, 96.5: 27872,
    96.75: 27953, 97.0: 28034, 97.25: 28115, 97.5: 28196, 97.75: 28277,
    98.0: 28358, 98.25: 28439, 98.5: 28520, 98.75: 28601, 99.0: 28682,
    99.25: 28763, 99.5: 28844, 99.75: 28925, 100.0: 29006, 100.25: 29087,
    100.5: 29168, 100.75: 29249, 101.0: 29330, 101.25: 29411, 101.5: 29492,
    101.75: 29573, 102.0: 29654, 102.25: 29735, 102.5: 29816, 102.75: 29897,
    103.0: 29978, 103.25: 30059, 103.5: 30140, 103.75: 30221, 104.0: 30302,
    104.25: 30383, 104.5: 30464, 104.75: 30545, 105.0: 30626, 105.25: 30707,
    105.5: 30788, 105.75: 30869, 106.0: 30950, 106.25: 31031, 106.5: 31112,
    106.75: 31193, 107.0: 31274, 107.25: 31355, 107.5: 31436, 107.75: 31517,
    108.0: 31598, 108.25: 31679, 108.5: 31760, 108.75: 31841, 109.0: 31922,
    109.25: 32003, 109.5: 32084, 109.75: 32165, 110.0: 32246, 110.25: 32327,
    110.5: 32408, 110.75: 32489, 111.0: 32570, 111.25: 32651, 111.5: 32732,
    111.75: 32813, 112.0: 32894, 112.25: 32975, 112.5: 33056, 112.75: 33137,
    113.0: 33218, 113.25: 33299, 113.5: 33380, 113.75: 33461, 114.0: 33542,
    114.25: 33623, 114.5: 33704, 114.75: 33785, 115.0: 33866, 115.25: 33947,
    115.5: 34028, 115.75: 34109, 116.0: 34190, 116.25: 34271, 116.5: 34352,
    116.75: 34352, 117.0: 34352,
}

# Full data for TCLX290169 exactly as you pasted
TCLX290169 = {
    0.00: 0, 0.25: 30, 0.50: 60, 0.75: 91, 1.00: 123, 1.25: 156, 1.50: 190,
    1.75: 224, 2.00: 259, 2.25: 295, 2.50: 331, 2.75: 368, 3.00: 405,
    3.25: 444, 3.50: 482, 3.75: 522, 4.00: 562, 4.25: 602, 4.50: 643,
    4.75: 685, 5.00: 727, 5.25: 770, 5.50: 813, 5.75: 857, 6.00: 901,
    6.25: 946, 6.50: 991, 6.75: 1037, 7.00: 1083, 7.25: 1130, 7.50: 1177,
    7.75: 1225, 8.00: 1273, 8.25: 1321, 8.50: 1370, 8.75: 1420, 9.00: 1469,
    9.25: 1520, 9.50: 1570, 9.75: 1621, 10.00: 1673, 10.25: 1725, 10.50: 1777,
    10.75: 1829, 11.00: 1882, 11.25: 1936, 11.50: 1990, 11.75: 2044, 12.00: 2098,
    12.25: 2153, 12.50: 2208, 12.75: 2264, 13.00: 2320, 13.25: 2376, 13.50: 2433,
    13.75: 2490, 14.00: 2547, 14.25: 2605, 14.50: 2663, 14.75: 2721, 15.00: 2780,
    15.25: 2838, 15.50: 2898, 15.75: 2957, 16.00: 3017, 16.25: 3077, 16.50: 3138,
    16.75: 3198, 17.00: 3260, 17.25: 3321, 17.50: 3382, 17.75: 3444, 18.00: 3507,
    18.25: 3569, 18.50: 3632, 18.75: 3695, 19.00: 3758, 19.25: 3822, 19.50: 3885,
    19.75: 3949, 20.00: 4014, 20.25: 4078, 20.50: 4143, 20.75: 4208, 21.00: 4274,
    21.25: 4339, 21.50: 4405, 21.75: 4471, 22.00: 4537, 22.25: 4604, 22.50: 4671,
    22.75: 4738, 23.00: 4805, 23.25: 4872, 23.50: 4940, 23.75: 5008, 24.00: 5076,
    24.25: 5144, 24.50: 5213, 24.75: 5281, 25.00: 5350, 25.25: 5419, 25.50: 5489,
    25.75: 5558, 26.00: 5628, 26.25: 5698, 26.50: 5768, 26.75: 5838, 27.00: 5909,
    27.25: 5980, 27.50: 6051, 27.75: 6122, 28.00: 6193, 28.25: 6264, 28.50: 6336,
    28.75: 6408, 29.00: 6480, 29.25: 6552, 29.50: 6624, 29.75: 6697, 30.00: 6769,
    30.25: 6842, 30.50: 6915, 30.75: 6988, 31.00: 7061, 31.25: 7135, 31.50: 7208,
    31.75: 7282, 32.00: 7356, 32.25: 7430, 32.50: 7504, 32.75: 7579, 33.00: 7653,
    33.25: 7728, 33.50: 7802, 33.75: 7877, 34.00: 7952, 34.25: 8028, 34.50: 8103,
    34.75: 8178, 35.00: 8254, 35.25: 8329, 35.50: 8405, 35.75: 8481, 36.00: 8557,
    36.25: 8633, 36.50: 8710, 36.75: 8786, 37.00: 8862, 37.25: 8939, 37.50: 9016,
    37.75: 9093, 38.00: 9170, 38.25: 9247, 38.50: 9324, 38.75: 9401, 39.00: 9478,
    39.25: 9556, 39.50: 9633, 39.75: 9711, 40.00: 9789, 40.25: 9866, 40.50: 9944,
    40.75: 10022, 41.00: 10100, 41.25: 10178, 41.50: 10257, 41.75: 10335,
    42.00: 10413, 42.25: 10492, 42.50: 10570, 42.75: 10649, 43.00: 10728,
    43.25: 10807, 43.50: 10885, 43.75: 10964, 44.00: 11043, 44.25: 11122,
    44.50: 11201, 44.75: 11281, 45.00: 11360, 45.25: 11439, 45.50: 11518,
    45.75: 11598, 46.00: 11677, 46.25: 11757, 46.50: 11836, 46.75: 11916,
    47.00: 11996, 47.25: 12075, 47.50: 12155, 47.75: 12235, 48.00: 12315,
    48.25: 12395, 48.50: 12474, 48.75: 12554, 49.00: 12634, 49.25: 12714,
    49.50: 12794, 49.75: 12874, 50.00: 12955, 50.25: 13035, 50.50: 13115,
    50.75: 13195, 51.00: 13275, 51.25: 13355, 51.50: 13436, 51.75: 13516,
    52.00: 13596, 52.25: 13676, 52.50: 13757, 52.75: 13837, 53.00: 13917,
    53.25: 13998, 53.50: 14078, 53.75: 14158, 54.00: 14239, 54.25: 14319,
    54.50: 14399, 54.75: 14480, 55.00: 14560, 55.25: 14640, 55.50: 14721,
    55.75: 14801, 56.00: 14881, 56.25: 14962, 56.50: 15042, 56.75: 15122,
    57.00: 15202, 57.25: 15283, 57.50: 15363, 57.75: 15443, 58.00: 15523,
    58.25: 15604, 58.50: 15684, 58.75: 15764, 59.00: 15844, 59.25: 15924,
    59.50: 16004, 59.75: 16084, 60.00: 16164, 60.25: 16244, 60.50: 16324,
    60.75: 16404, 61.00: 16483, 61.25: 16563, 61.50: 16643, 61.75: 16723,
    62.00: 16802, 62.25: 16882, 62.50: 16961, 62.75: 17041, 63.00: 17120,
    63.25: 17200, 63.50: 17279, 63.75: 17358, 64.00: 17438, 64.25: 17517,
    64.50: 17596, 64.75: 17675, 65.00: 17754, 65.25: 17833, 65.50: 17912,
    65.75: 17990, 66.00: 18069, 66.25: 18148, 66.50: 18226, 66.75: 18305,
    67.00: 18383, 67.25: 18461, 67.50: 18540, 67.75: 18618, 68.00: 18696,
    68.25: 18774, 68.50: 18852, 68.75: 18929, 69.00: 19007, 69.25: 19085,
    69.50: 19162, 69.75: 19240, 70.00: 19317, 70.25: 19394, 70.50: 19471,
    70.75: 19548, 71.00: 19625, 71.25: 19702, 71.50: 19779, 71.75: 19855,
    72.00: 19932, 72.25: 20008, 72.50: 20084, 72.75: 20161, 73.00: 20237,
    73.25: 20313, 73.50: 20388, 73.75: 20464, 74.00: 20539, 74.25: 20615,
    74.50: 20690, 74.75: 20765, 75.00: 20840, 75.25: 20915, 75.50: 20990,
    75.75: 21064, 76.00: 21139, 76.25: 21213, 76.50: 21287, 76.75: 21361,
    77.00: 21435, 77.25: 21509, 77.50: 21583, 77.75: 21656, 78.00: 21729,
    78.25: 21802, 78.50: 21875, 78.75: 21948, 79.00: 22021, 79.25: 22093,
    79.50: 22165, 79.75: 22238, 80.00: 22309, 80.25: 22381, 80.50: 22453,
    80.75: 22524, 81.00: 22595, 81.25: 22667, 81.50: 22737, 81.75: 22808,
    82.00: 22879, 82.25: 22949, 82.50: 23019, 82.75: 23089, 83.00: 23159,
    83.25: 23228, 83.50: 23298, 83.75: 23367, 84.00: 23436, 84.25: 23504,
    84.50: 23573, 84.75: 23641, 85.00: 23709, 85.25: 23777, 85.50: 23845,
    85.75: 23912, 86.00: 23979, 86.25: 24046, 86.50: 24113, 86.75: 24180,
    87.00: 24246, 87.25: 24312, 87.50: 24378, 87.75: 24443, 88.00: 24509,
    88.25: 24574, 88.50: 24638, 88.75: 24703, 89.00: 24767, 89.25: 24831,
    89.50: 24895, 89.75: 24959, 90.00: 25022, 90.25: 25085, 90.50: 25148,
    90.75: 25210, 91.00: 25272, 91.25: 25334, 91.50: 25396, 91.75: 25457,
    92.00: 25518, 92.25: 25579, 92.50: 25639, 92.75: 25700, 93.00: 25759,
    93.25: 25819, 93.50: 25878, 93.75: 25937, 94.00: 25996, 94.25: 26054,
    94.50: 26112, 94.75: 26170, 95.00: 26227, 95.25: 26284, 95.50: 26341,
    95.75: 26397, 96.00: 26453, 96.25: 26509, 96.50: 26564, 96.75: 26619,
    97.00: 26673, 97.25: 26728, 97.50: 26781, 97.75: 26835, 98.00: 26888,
    98.25: 26941, 98.50: 26993, 98.75: 27045, 99.00: 27096, 99.25: 27147,
    99.50: 27198, 99.75: 27248, 100.00: 27298, 100.25: 27348, 100.50: 27397,
    100.75: 27445, 101.00: 27494, 101.25: 27541, 101.50: 27589, 101.75: 27635,
    102.00: 27682, 102.25: 27728, 102.50: 27773, 102.75: 27818, 103.00: 27863,
    103.25: 27907, 103.50: 27951, 103.75: 27995, 104.00: 28038, 104.25: 28081,
    104.50: 28124, 104.75: 28166, 105.00: 28208, 105.25: 28250, 105.50: 28292,
    105.75: 28333, 106.00: 28374, 106.25: 28415, 106.50: 28455, 106.75: 28495,
    107.00: 28535, 107.25: 28574, 107.50: 28613, 107.75: 28652, 108.00: 28691,
    108.25: 28730, 108.50: 28768, 108.75: 28806, 109.00: 28844, 109.25: 28882,
    109.50: 28919, 109.75: 28956, 110.00: 28993, 110.25: 29030, 110.50: 29066,
    110.75: 29102, 111.00: 29138, 111.25: 29174, 111.50: 29210, 111.75: 29245,
    112.00: 29280, 112.25: 29315, 112.50: 29350, 112.75: 29384, 113.00: 29418,
    113.25: 29452, 113.50: 29486, 113.75: 29520, 114.00: 29553, 114.25: 29586,
    114.50: 29619, 114.75: 29651, 115.00: 29684, 115.25: 29716, 115.50: 29748,
    115.75: 29780, 116.00: 29812, 116.25: 29844, 116.50: 29875,
}

# Helper function: linear interpolation
def interpolate(height, data):
    heights = sorted(data.keys())
    if height <= heights[0]:
        return data[heights[0]]
    if height >= heights[-1]:
        return data[heights[-1]]

    # Find lower and upper bounds for interpolation
    for i in range(len(heights)-1):
        h_low = heights[i]
        h_high = heights[i+1]
        if h_low <= height <= h_high:
            v_low = data[h_low]
            v_high = data[h_high]
            # Linear interpolation formula
            interp_value = v_low + (v_high - v_low) * (height - h_low) / (h_high - h_low)
            return interp_value

    # Should never reach here if data is continuous
    return None

# Streamlit app
st.title("Railcar Tank Volume Calculator")

tank_name = st.selectbox("Select Tank Profile", ["SKSX117122", "TCLX290169"])

if tank_name == "SKSX117122":
    data = SKSX117122
elif tank_name == "TCLX290169":
    data = TCLX290169

min_height = min(data.keys())
max_height = max(data.keys())

height_input = st.number_input(
    f"Enter Height in inches ({min_height} to {max_height}):",
    min_value=float(min_height),
    max_value=float(max_height),
    step=0.25,
    format="%.2f",
)

volume = interpolate(height_input, data)

st.write(f"**Calculated Volume:** {volume:.2f} gallons")
