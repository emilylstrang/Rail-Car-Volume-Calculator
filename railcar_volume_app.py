import streamlit as st

# Full data for SKSX117122 (height in inches : volume in gallons)
sksx117122_data = {
    0.00: 0, 0.25: 38, 0.50: 77, 0.75: 115, 1.00: 153, 1.25: 192, 1.50: 230, 1.75: 268,
    2.00: 307, 2.25: 345, 2.50: 383, 2.75: 421, 3.00: 459, 3.25: 497, 3.50: 535, 3.75: 573,
    4.00: 611, 4.25: 649, 4.50: 687, 4.75: 725, 5.00: 763, 5.25: 801, 5.50: 839, 5.75: 877,
    6.00: 915, 6.25: 953, 6.50: 991, 6.75: 1029, 7.00: 1067, 7.25: 1105, 7.50: 1143, 7.75: 1181,
    8.00: 1219, 8.25: 1257, 8.50: 1295, 8.75: 1333, 9.00: 1371, 9.25: 1409, 9.50: 1447, 9.75: 1485,
    10.00: 1523, 10.25: 1561, 10.50: 1599, 10.75: 1637, 11.00: 1675, 11.25: 1713, 11.50: 1751, 11.75: 1789,
    12.00: 1827, 12.25: 1865, 12.50: 1903, 12.75: 1941, 13.00: 1979, 13.25: 2017, 13.50: 2055, 13.75: 2093,
    14.00: 2131, 14.25: 2169, 14.50: 2207, 14.75: 2245, 15.00: 2283, 15.25: 2321, 15.50: 2359, 15.75: 2397,
    16.00: 2435, 16.25: 2473, 16.50: 2511, 16.75: 2549, 17.00: 2587, 17.25: 2625, 17.50: 2663, 17.75: 2701,
    18.00: 2739, 18.25: 2777, 18.50: 2815, 18.75: 2853, 19.00: 2891, 19.25: 2929, 19.50: 2967, 19.75: 3005,
    20.00: 3043, 20.25: 3081, 20.50: 3119, 20.75: 3157, 21.00: 3195, 21.25: 3233, 21.50: 3271, 21.75: 3309,
    22.00: 3347, 22.25: 3385, 22.50: 3423, 22.75: 3461, 23.00: 3499, 23.25: 3537, 23.50: 3575, 23.75: 3613,
    24.00: 3651, 24.25: 3689, 24.50: 3727, 24.75: 3765, 25.00: 3803, 25.25: 3841, 25.50: 3879, 25.75: 3917,
    26.00: 3955, 26.25: 3993, 26.50: 4031, 26.75: 4069, 27.00: 4107, 27.25: 4145, 27.50: 4183, 27.75: 4221,
    28.00: 4259, 28.25: 4297, 28.50: 4335, 28.75: 4373, 29.00: 4411, 29.25: 4449, 29.50: 4487, 29.75: 4525,
    30.00: 4563, 30.25: 4601, 30.50: 4639, 30.75: 4677, 31.00: 4715, 31.25: 4753, 31.50: 4791, 31.75: 4829,
    32.00: 4867, 32.25: 4905, 32.50: 4943, 32.75: 4981, 33.00: 5019, 33.25: 5057, 33.50: 5095, 33.75: 5133,
    34.00: 5171, 34.25: 5209, 34.50: 5247, 34.75: 5285, 35.00: 5323, 35.25: 5361, 35.50: 5399, 35.75: 5437,
    36.00: 5475, 36.25: 5513, 36.50: 5551, 36.75: 5589, 37.00: 5627, 37.25: 5665, 37.50: 5703, 37.75: 5741,
    38.00: 5779, 38.25: 5817, 38.50: 5855, 38.75: 5893, 39.00: 5931, 39.25: 5969, 39.50: 6007, 39.75: 6045,
    40.00: 6083, 40.25: 6121, 40.50: 6159, 40.75: 6197, 41.00: 6235, 41.25: 6273, 41.50: 6311, 41.75: 6349,
    42.00: 6387, 42.25: 6425, 42.50: 6463, 42.75: 6501, 43.00: 6539, 43.25: 6577, 43.50: 6615, 43.75: 6653,
    44.00: 6691, 44.25: 6729, 44.50: 6767, 44.75: 6805, 45.00: 6843, 45.25: 6881, 45.50: 6919, 45.75: 6957,
    46.00: 6995, 46.25: 7033, 46.50: 7071, 46.75: 7109, 47.00: 7147, 47.25: 7185, 47.50: 7223, 47.75: 7261,
    48.00: 7299, 48.25: 7337, 48.50: 7375, 48.75: 7413, 49.00: 7451, 49.25: 7489, 49.50: 7527, 49.75: 7565,
    50.00: 7603, 50.25: 7641, 50.50: 7679, 50.75: 7717, 51.00: 7755, 51.25: 7793, 51.50: 7831, 51.75: 7869,
    52.00: 7907, 52.25: 7945, 52.50: 7983, 52.75: 8021, 53.00: 8059, 53.25: 8097, 53.50: 8135, 53.75: 8173,
    54.00: 8211, 54.25: 8249, 54.50: 8287, 54.75: 8325, 55.00: 8363, 55.25: 8401, 55.50: 8439, 55.75: 8477,
    56.00: 8515, 56.25: 8553, 56.50: 8591, 56.75: 8629, 57.00: 8667, 57.25: 8705, 57.50: 8743, 57.75: 8781,
    58.00: 8819, 58.25: 8857, 58.50: 8895, 58.75: 8933, 59.00: 8971, 59.25: 9009, 59.50: 9047, 59.75: 9085,
    60.00: 9123, 60.25: 9161, 60.50: 9199, 60.75: 9237, 61.00: 9275, 61.25: 9313, 61.50: 9351, 61.75: 9389,
    62.00: 9427, 62.25: 9465, 62.50: 9503, 62.75: 9541, 63.00: 9579, 63.25: 9617, 63.50: 9655, 63.75: 9693,
    64.00: 9731, 64.25: 9769, 64.50: 9807, 64.75: 9845, 65.00: 9883, 65.25: 9921, 65.50: 9959, 65.75: 9997,
    66.00: 10035, 66.25: 10073, 66.50: 10111, 66.75: 10149, 67.00: 10187, 67.25: 10225, 67.50: 10263, 67.75: 10301,
    68.00: 10339, 68.25: 10377, 68.50: 10415, 68.75: 10453, 69.00: 10491, 69.25: 10529, 69.50: 10567, 69.75: 10605,
    70.00: 10643, 70.25: 10681, 70.50: 10719, 70.75: 10757, 71.00: 10795, 71.25: 10833, 71.50: 10871, 71.75: 10909,
    72.00: 10947, 72.25: 10985, 72.50: 11023, 72.75: 11061, 73.00: 11099, 73.25: 11137, 73.50: 11175, 73.75: 11213,
    74.00: 11251, 74.25: 11289, 74.50: 11327, 74.75: 11365, 75.00: 11403, 75.25: 11441, 75.50: 11479, 75.75: 11517,
    76.00: 11555, 76.25: 11593, 76.50: 11631, 76.75: 11669, 77.00: 11707, 77.25: 11745, 77.50: 11783, 77.75: 11821,
    78.00: 11859, 78.25: 11897, 78.50: 11935, 78.75: 11973, 79.00: 12011, 79.25: 12049, 79.50: 12087, 79.75: 12125,
    80.00: 12163, 80.25: 12201, 80.50: 12239, 80.75: 12277, 81.00: 12315, 81.25: 12353, 81.50: 12391, 81.75: 12429,
    82.00: 12467, 82.25: 12505, 82.50: 12543, 82.75: 12581, 83.00: 12619, 83.25: 12657, 83.50: 12695, 83.75: 12733,
    84.00: 12771, 84.25: 12809, 84.50: 12847, 84.75: 12885, 85.00: 12923, 85.25: 12961, 85.50: 12999, 85.75: 13037,
    86.00: 13075, 86.25: 13113, 86.50: 13151, 86.75: 13189, 87.00: 13227, 87.25: 13265, 87.50: 13303, 87.75: 13341,
    88.00: 13379, 88.25: 13417, 88.50: 13455, 88.75: 13493, 89.00: 13531, 89.25: 13569, 89.50: 13607, 89.75: 13645,
    90.00: 13683, 90.25: 13721, 90.50: 13759, 90.75: 13797, 91.00: 13835, 91.25: 13873, 91.50: 13911, 91.75: 13949,
    92.00: 13987, 92.25: 14025, 92.50: 14063, 92.75: 14101, 93.00: 14139, 93.25: 14177, 93.50: 14215, 93.75: 14253,
    94.00: 14291, 94.25: 14329, 94.50: 14367, 94.75: 14405, 95.00: 14443, 95.25: 14481, 95.50: 14519, 95.75: 14557,
    96.00: 14595, 96.25: 14633, 96.50: 14671, 96.75: 14709, 97.00: 14747, 97.25: 14785, 97.50: 14823, 97.75: 14861,
    98.00: 14899, 98.25: 14937, 98.50: 14975, 98.75: 15013, 99.00: 15051, 99.25: 15089, 99.50: 15127, 99.75: 15165,
    100.00: 15203, 100.25: 15241, 100.50: 15279, 100.75: 15317, 101.00: 15355, 101.25: 15393, 101.50: 15431, 101.75: 15469,
    102.00: 15507, 102.25: 15545, 102.50: 15583, 102.75: 15621, 103.00: 15659, 103.25: 15697, 103.50: 15735, 103.75: 15773,
    104.00: 15811, 104.25: 15849, 104.50: 15887, 104.75: 15925, 105.00: 15963, 105.25: 16001, 105.50: 16039, 105.75: 16077,
    106.00: 16115, 106.25: 16153, 106.50: 16191, 106.75: 16229, 107.00: 16267, 107.25: 16305, 107.50: 16343, 107.75: 16381,
    108.00: 16419, 108.25: 16457, 108.50: 16495, 108.75: 16533, 109.00: 16571, 109.25: 16609, 109.50: 16647, 109.75: 16685,
    110.00: 16723, 110.25: 16761, 110.50: 16799, 110.75: 16837, 111.00: 16875, 111.25: 16913, 111.50: 16951, 111.75: 16989,
    112.00: 17027, 112.25: 17065, 112.50: 17103, 112.75: 17141, 113.00: 17179, 113.25: 17217, 113.50: 17255, 113.75: 17293,
    114.00: 17331, 114.25: 17369, 114.50: 17407, 114.75: 17445, 115.00: 17483, 115.25: 17521, 115.50: 17559, 115.75: 17597,
    116.00: 17635, 116.25: 17673, 116.50: 17711, 116.75: 17749, 117.00: 17787,
}

# Full data for TCLX290169 (height in inches : volume in gallons)
tclx290169_data = {
    0.00: 0, 0.25: 30, 0.50: 60, 0.75: 91, 1.00: 123, 1.25: 156, 1.50: 190, 1.75: 224,
    2.00: 259, 2.25: 295, 2.50: 331, 2.75: 368, 3.00: 405, 3.25: 444, 3.50: 482, 3.75: 522,
    4.00: 562, 4.25: 602, 4.50: 643, 4.75: 685, 5.00: 727, 5.25: 770, 5.50: 813, 5.75: 857,
    6.00: 901, 6.25: 946, 6.50: 991, 6.75: 1037, 7.00: 1083, 7.25: 1130, 7.50: 1177, 7.75: 1225,
    8.00: 1273, 8.25: 1321, 8.50: 1370, 8.75: 1420, 9.00: 1469, 9.25: 1520, 9.50: 1570, 9.75: 1621,
    10.00: 1673, 10.25: 1725, 10.50: 1777, 10.75: 1829, 11.00: 1882, 11.25: 1936, 11.50: 1990, 11.75: 2044,
    12.00: 2098, 12.25: 2153, 12.50: 2208, 12.75: 2264, 13.00: 2320, 13.25: 2376, 13.50: 2433, 13.75: 2490,
    14.00: 2547, 14.25: 2605, 14.50: 2663, 14.75: 2721, 15.00: 2780, 15.25: 2838, 15.50: 2898, 15.75: 2957,
    16.00: 3017, 16.25: 3077, 16.50: 3138, 16.75: 3198, 17.00: 3260, 17.25: 3321, 17.50: 3382, 17.75: 3444,
    18.00: 3507, 18.25: 3569, 18.50: 3632, 18.75: 3695, 19.00: 3758, 19.25: 3822, 19.50: 3885, 19.75: 3949,
    20.00: 4014, 20.25: 4078, 20.50: 4143, 20.75: 4208, 21.00: 4274, 21.25: 4339, 21.50: 4405, 21.75: 4471,
    22.00: 4537, 22.25: 4604, 22.50: 4671, 22.75: 4738, 23.00: 4805, 23.25: 4872, 23.50: 4940, 23.75: 5008,
    24.00: 5076, 24.25: 5144, 24.50: 5213, 24.75: 5281, 25.00: 5350, 25.25: 5419, 25.50: 5489, 25.75: 5558,
    26.00: 5628, 26.25: 5698, 26.50: 5768, 26.75: 5838, 27.00: 5909, 27.25: 5980, 27.50: 6051, 27.75: 6122,
    28.00: 6193, 28.25: 6264, 28.50: 6336, 28.75: 6408, 29.00: 6480, 29.25: 6552, 29.50: 6624, 29.75: 6697,
    30.00: 6769, 30.25: 6842, 30.50: 6915, 30.75: 6988, 31.00: 7061, 31.25: 7135, 31.50: 7208, 31.75: 7282,
    32.00: 7356, 32.25: 7430, 32.50: 7504, 32.75: 7579, 33.00: 7653, 33.25: 7728, 33.50: 7802, 33.75: 7877,
    34.00: 7952, 34.25: 8028, 34.50: 8103, 34.75: 8178, 35.00: 8254, 35.25: 8329, 35.50: 8405, 35.75: 8481,
    36.00: 8557, 36.25: 8633, 36.50: 8710, 36.75: 8786, 37.00: 8862, 37.25: 8939, 37.50: 9016, 37.75: 9093,
    38.00: 9170, 38.25: 9247, 38.50: 9324, 38.75: 9401, 39.00: 9478, 39.25: 9556, 39.50: 9633, 39.75: 9711,
    40.00: 9789, 40.25: 9866, 40.50: 9944, 40.75: 10022, 41.00: 10100, 41.25: 10178, 41.50: 10257, 41.75: 10335,
    42.00: 10413, 42.25: 10492, 42.50: 10570, 42.75: 10649, 43.00: 10728, 43.25: 10807, 43.50: 10885, 43.75: 10964,
    44.00: 11043, 44.25: 11122, 44.50: 11201, 44.75: 11281, 45.00: 11360, 45.25: 11439, 45.50: 11518, 45.75: 11598,
    46.00: 11677, 46.25: 11757, 46.50: 11836, 46.75: 11916, 47.00: 11996, 47.25: 12075, 47.50: 12155, 47.75: 12235,
    48.00: 12315, 48.25: 12395, 48.50: 12474, 48.75: 12554, 49.00: 12634, 49.25: 12714, 49.50: 12794, 49.75: 12874,
    50.00: 12955, 50.25: 13035, 50.50: 13115, 50.75: 13195, 51.00: 13275, 51.25: 13355, 51.50: 13436, 51.75: 13516,
    52.00: 13596, 52.25: 13676, 52.50: 13757, 52.75: 13837, 53.00: 13917, 53.25: 13998, 53.50: 14078, 53.75: 14158,
    54.00: 14239, 54.25: 14319, 54.50: 14399, 54.75: 14480, 55.00: 14560, 55.25: 14640, 55.50: 14721, 55.75: 14801,
    56.00: 14881, 56.25: 14962, 56.50: 15042, 56.75: 15122, 57.00: 15202, 57.25: 15283, 57.50: 15363, 57.75: 15443,
    58.00: 15523, 58.25: 15604, 58.50: 15684, 58.75: 15764, 59.00: 15844, 59.25: 15924, 59.50: 16004, 59.75: 16084,
    60.00: 16164, 60.25: 16244, 60.50: 16324, 60.75: 16404, 61.00: 16483, 61.25: 16563, 61.50: 16643, 61.75: 16723,
    62.00: 16802, 62.25: 16882, 62.50: 16961, 62.75: 17041, 63.00: 17120, 63.25: 17200, 63.50: 17279, 63.75: 17358,
    64.00: 17438, 64.25: 17517, 64.50: 17596, 64.75: 17675, 65.00: 17754, 65.25: 17833, 65.50: 17912, 65.75: 17990,
    66.00: 18069, 66.25: 18148, 66.50: 18226, 66.75: 18305, 67.00: 18383, 67.25: 18461, 67.50: 18540, 67.75: 18618,
    68.00: 18696, 68.25: 18774, 68.50: 18852, 68.75: 18929, 69.00: 19007, 69.25: 19085, 69.50: 19162, 69.75: 19240,
    70.00: 19317, 70.25: 19394, 70.50: 19471, 70.75: 19548, 71.00: 19625, 71.25: 19702, 71.50: 19779, 71.75: 19855,
    72.00: 19932, 72.25: 20008, 72.50: 20084, 72.75: 20161, 73.00: 20237, 73.25: 20313, 73.50: 20388, 73.75: 20464,
    74.00: 20539, 74.25: 20615, 74.50: 20690, 74.75: 20765, 75.00: 20840, 75.25: 20915, 75.50: 20990, 75.75: 21064,
    76.00: 21139, 76.25: 21213, 76.50: 21287, 76.75: 21361, 77.00: 21435, 77.25: 21509, 77.50: 21583, 77.75: 21656,
    78.00: 21729, 78.25: 21802, 78.50: 21875, 78.75: 21948, 79.00: 22021, 79.25: 22093, 79.50: 22165, 79.75: 22238,
    80.00: 22309, 80.25: 22381, 80.50: 22453, 80.75: 22524, 81.00: 22595, 81.25: 22667, 81.50: 22737, 81.75: 22808,
    82.00: 22879, 82.25: 22949, 82.50: 23019, 82.75: 23089, 83.00: 23159, 83.25: 23228, 83.50: 23298, 83.75: 23367,
    84.00: 23436, 84.25: 23504, 84.50: 23573, 84.75: 23641, 85.00: 23709, 85.25: 23777, 85.50: 23845, 85.75: 23912,
    86.00: 23979, 86.25: 24046, 86.50: 24113, 86.75: 24180, 87.00: 24246, 87.25: 24312, 87.50: 24378, 87.75: 24443,
    88.00: 24509, 88.25: 24574, 88.50: 24638, 88.75: 24703, 89.00: 24767, 89.25: 24831, 89.50: 24895, 89.75: 24959,
    90.00: 25022, 90.25: 25085, 90.50: 25148, 90.75: 25210, 91.00: 25272, 91.25: 25334, 91.50: 25396, 91.75: 25457,
    92.00: 25518, 92.25: 25579, 92.50: 25639, 92.75: 25700, 93.00: 25759, 93.25: 25819, 93.50: 25878, 93.75: 25937,
    94.00: 25996, 94.25: 26054, 94.50: 26112, 94.75: 26170, 95.00: 26227, 95.25: 26284, 95.50: 26341, 95.75: 26397,
    96.00: 26453, 96.25: 26509, 96.50: 26564, 96.75: 26619, 97.00: 26674, 97.25: 26728, 97.50: 26782, 97.75: 26836,
    98.00: 26889, 98.25: 26942, 98.50: 26994, 98.75: 27046, 99.00: 27098, 99.25: 27150, 99.50: 27201, 99.75: 27252,
    100.00: 27302, 100.25: 27352, 100.50: 27402, 100.75: 27451, 101.00: 27500, 101.25: 27549, 101.50: 27598, 101.75: 27646,
    102.00: 27694, 102.25: 27742, 102.50: 27789, 102.75: 27836, 103.00: 27883, 103.25: 27929, 103.50: 27975, 103.75: 28021,
    104.00: 28067, 104.25: 28112, 104.50: 28157, 104.75: 28201, 105.00: 28245, 105.25: 28289, 105.50: 28332, 105.75: 28375,
    106.00: 28418, 106.25: 28460, 106.50: 28502, 106.75: 28544, 107.00: 28585, 107.25: 28626, 107.50: 28667, 107.75: 28707,
    108.00: 28747, 108.25: 28787, 108.50: 28827, 108.75: 28866, 109.00: 28905, 109.25: 28944, 109.50: 28983, 109.75: 29021,
    110.00: 29059, 110.25: 29097, 110.50: 29135, 110.75: 29173, 111.00: 29210, 111.25: 29247, 111.50: 29284, 111.75: 29321,
    112.00: 29358, 112.25: 29394, 112.50: 29430, 112.75: 29466, 113.00: 29502, 113.25: 29538, 113.50: 29574, 113.75: 29609,
    114.00: 29644, 114.25: 29679, 114.50: 29714, 114.75: 29749, 115.00: 29783, 115.25: 29817, 115.50: 29851, 115.75: 29885,
    116.00: 29919, 116.25: 29952, 116.50: 29985, 116.75: 30018, 117.00: 30051,
}

# All tanks dictionary
tanks = {
    "SKSX117122": sksx117122_data,
    "TCLX290169": tclx290169_data
}

def inches_to_cm(inches):
    return inches * 2.54

def cm_to_inches(cm):
    return cm / 2.54

def interpolate(data, height):
    keys = sorted(data.keys())
    if height in data:
        return data[height]
    if height < keys[0] or height > keys[-1]:
        return None
    for i in range(len(keys)-1):
        if keys[i] < height < keys[i+1]:
            x0, x1 = keys[i], keys[i+1]
            y0, y1 = data[x0], data[x1]
            return y0 + (height - x0) * (y1 - y0) / (x1 - x0)
    return None

st.title("Railcar Tank Volume Calculator")

tank_name = st.selectbox("Select Tank", list(tanks.keys()))

height_unit = st.radio("Height input unit:", ("inches", "cm"))

volume_unit = st.radio("Volume output unit:", ("gallons", "litres"))

height_input = st.number_input(
    f"Enter height in {height_unit} (0 - 117):",
    min_value=0.0,
    max_value=117.0,
    step=0.25,
    format="%.2f"
)

# Convert height input to inches for lookup
height_in_inches = cm_to_inches(height_input) if height_unit == "cm" else height_input

volume_gallons = interpolate(tanks[tank_name], height_in_inches)

if volume_gallons is None:
    st.error("Height out of range for selected tank.")
else:
    if volume_unit == "litres":
        volume = volume_gallons * 3.78541
    else:
        volume = volume_gallons
    st.write(f"Volume at {height_input:.2f} {height_unit} for tank {tank_name}: {volume:.2f} {volume_unit}")
